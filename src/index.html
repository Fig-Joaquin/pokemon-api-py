<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráficos con D3.js</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <h2>Gráfico de Barras</h2>
    <svg id="grafico-barras"></svg>

    <h2>Gráfico de Líneas</h2>
    <svg id="grafico-lineas"></svg>

    <script>
        // Datos
        const datos = [
            {"x": 1, "y": 10},
            {"x": 2, "y": 20},
            {"x": 3, "y": 30},
            {"x": 4, "y": 40},
            {"x": 5, "y": 50}
        ];

        // Configuración del gráfico de barras
        const svgBarras = d3.select("#grafico-barras");
        const anchoBarras = 400;
        const altoBarras = 200;
        const margenBarras = {top: 20, right: 30, bottom: 30, left: 40};
        const escalaX = d3.scaleBand().domain(datos.map(d => d.x)).range([margenBarras.left, anchoBarras - margenBarras.right]).padding(0.1);
        const escalaY = d3.scaleLinear().domain([0, d3.max(datos, d => d.y)]).nice().range([altoBarras - margenBarras.bottom, margenBarras.top]);
        
        svgBarras.selectAll("rect")
            .data(datos)
            .join("rect")
                .attr("x", d => escalaX(d.x))
                .attr("y", d => escalaY(d.y))
                .attr("height", d => escalaY(0) - escalaY(d.y))
                .attr("width", escalaX.bandwidth())
                .attr("fill", "steelblue");

        svgBarras.append("g")
            .attr("transform", `translate(0,${altoBarras - margenBarras.bottom})`)
            .call(d3.axisBottom(escalaX));

        svgBarras.append("g")
            .attr("transform", `translate(${margenBarras.left},0)`)
            .call(d3.axisLeft(escalaY));

        // Configuración del gráfico de líneas
        const svgLineas = d3.select("#grafico-lineas");
        const anchoLineas = 400;
        const altoLineas = 200;
        const margenLineas = {top: 20, right: 30, bottom: 30, left: 40};
        const escalaXLineas = d3.scaleLinear().domain(d3.extent(datos, d => d.x)).nice().range([margenLineas.left, anchoLineas - margenLineas.right]);
        const escalaYLineas = d3.scaleLinear().domain([0, d3.max(datos, d => d.y)]).nice().range([altoLineas - margenLineas.bottom, margenLineas.top]);

        const linea = d3.line()
            .x(d => escalaXLineas(d.x))
            .y(d => escalaYLineas(d.y));

        svgLineas.append("path")
            .datum(datos)
            .attr("fill", "none")
            .attr("stroke", "steelblue")
            .attr("stroke-width", 1.5)
            .attr("d", linea);

        svgLineas.append("g")
            .attr("transform", `translate(0,${altoLineas - margenLineas.bottom})`)
            .call(d3.axisBottom(escalaXLineas));

        svgLineas.append("g")
            .attr("transform", `translate(${margenLineas.left},0)`)
            .call(d3.axisLeft(escalaYLineas));
    </script>
</body>
</html>
